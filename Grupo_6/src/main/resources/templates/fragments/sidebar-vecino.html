<!-- fragment/navbar-vecino.html -->
<style>
    .nav-link.active {
        background-color: rgba(255,255,255,0.2);
        border-radius: 0.375rem;
    }

    .rotate-icon {
        transition: transform 0.3s ease;
    }

    .rotate-icon.rotated {
        transform: rotate(180deg);
    }
</style>

<nav id="sidebar" class="sidebar" th:fragment="sidebar">
    <!-- Encabezado con logo -->
    <div class="sidebar-header text-center">
        <a th:href="@{/vecino}" class="logo-link d-block">
            <img th:src="@{/img/logo_sanmiguel.png}" alt="Logo Municipalidad">
        </a>
        <span class="municipality-name d-block text-white"
              th:text="${usuario != null ? usuario.nombres + ' ' + usuario.apellidos : 'Vecino'}">
            Vecino
        </span>
    </div>

    <!-- Menú de navegación -->
    <ul class="nav flex-column text-white">
        <li class="nav-item">
            <a th:href="@{/vecino}" class="nav-link">
                <i class="bi bi-house-door-fill me-2"></i>Inicio
            </a>
        </li>

        <li class="nav-item">
            <a th:href="@{/vecino/reservas/historial}" class="nav-link">
                <i class="bi bi-calendar-check-fill me-2"></i>Mis Reservas
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link d-flex justify-content-between align-items-center"
               data-bs-toggle="collapse"
               href="#submenuReservar"
               role="button"
               th:attr="aria-expanded=${idtipoActivo != null}"
               aria-controls="submenuReservar">
                <span><i class="bi bi-bookmark-plus-fill me-2"></i>Reservar</span>
                <i class="bi bi-chevron-down rotate-icon"
                   th:classappend="${idtipoActivo != null} ? ' rotated' : ''"></i>
            </a>

            <div class="collapse ps-3 [[${idtipoActivo != null} ? 'show' : '']]" id="submenuReservar">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=2)}"
                           th:class="'nav-link' + (${idtipoActivo == 2} ? ' active fw-bold text-white' : '')"> Gimnasio</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=4)}"
                           th:class="'nav-link' + (${idtipoActivo == 4} ? ' active fw-bold text-white' : '')"> Cancha Vóley</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=3)}"
                           th:class="'nav-link' + (${idtipoActivo == 3} ? ' active fw-bold text-white' : '')"> Cancha Fútbol</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=1)}"
                           th:class="'nav-link' + (${idtipoActivo == 1} ? ' active fw-bold text-white' : '')"> Piscina</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=7)}"
                           th:class="'nav-link' + (${idtipoActivo == 7} ? ' active fw-bold text-white' : '')"> Atletismo</a>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
</nav>
