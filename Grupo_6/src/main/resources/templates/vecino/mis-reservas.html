<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Reservas</title>

    <!-- Estilos -->
    <link href="../../static/css/app.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
</head>
<body>
<div class="wrapper">
    <!-- Sidebar -->
    <div id="sidebar-container"></div>

    <div class="main">
        <!-- Navbar -->
        <nav class="navbar navbar-expand navbar-light navbar-bg">
            <a class="sidebar-toggle js-sidebar-toggle">
                <i class="hamburger align-self-center"></i>
            </a>
            <div class="navbar-collapse collapse">
                <ul class="navbar-nav navbar-align ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <img src="../../static/img/icons/campana.png" alt="Notificaciones" style="height: 18px; width: 18px;">
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                            <i data-feather="user"></i>
                            <span class="text-dark">Vecino</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="perfil.html">Mi cuenta</a></li>
                            <li><a class="dropdown-item" href="#">Cerrar sesión</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Contenido -->
        <main class="content">
            <div class="container-fluid p-4">
                <h2 class="mb-4">Mis Reservas</h2>

                <!-- Filtros -->
                <div class="row mb-4">
                    <div class="col-md-4">
                        <input type="date" class="form-control" id="filtroFecha" placeholder="Filtrar por fecha">
                    </div>
                    <div class="col-md-4">
                        <select class="form-select" id="filtroEstado">
                            <option value="">Todos los estados</option>
                            <option value="confirmado">Confirmado</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                    <div class="col-md-4 text-end">
                        <button class="btn btn-secondary" onclick="limpiarFiltros()">Limpiar filtros</button>
                    </div>
                </div>

                <!-- Tabla de reservas -->
                <div class="table-responsive">
                    <table id="tablaReservas" class="table table-striped" style="width:100%">
                        <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Hora</th>
                            <th>Instalación</th>
                            <th>Ubicación</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>2025-05-01</td>
                            <td>08:00 - 09:00</td>
                            <td>Gimnasio Municipal</td>
                            <td>Jr. Agustín Gamarra 120</td>
                            <td><span class="badge bg-success">Confirmado</span></td>
                            <td><a href="detalle-reserva.html" class="btn btn-sm btn-outline-primary">Ver más</a></td>
                        </tr>
                        <tr>
                            <td>2025-05-03</td>
                            <td>18:00 - 19:00</td>
                            <td>Cancha Grass</td>
                            <td>Av. La Paz 456</td>
                            <td><span class="badge bg-warning text-dark">Pendiente</span></td>
                            <td><a href="detalle-reserva.html" class="btn btn-sm btn-outline-primary">Ver más</a></td>

                        </tr>
                        <!-- Puedes agregar más filas aquí -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer mt-auto py-3">
            <div class="text-center mt-5 mb-5">
                <img src="../../static/img/photos/logo-san-miguel.png" height="60" alt="Logo Municipalidad San Miguel">
            </div>
            <div class="container text-center text-muted">
                Municipalidad de San Miguel © 2025
            </div>
        </footer>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/feather-icons"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>
    feather.replace();

    // Cargar el sidebar desde fragment
    fetch('../fragments/sidebar-vecino.html')
        .then(res => res.text())
        .then(html => {
            document.getElementById('sidebar-container').innerHTML = html;

            const toggle = document.querySelector('.js-sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            const main = document.querySelector('.main');
            toggle?.addEventListener('click', function (e) {
                e.preventDefault();
                sidebar.classList.toggle('collapsed');
                main.classList.toggle('sidebar-collapsed');
            });

            feather.replace();
        });

    // Inicializar DataTable
    $(document).ready(function () {
        const tabla = $('#tablaReservas').DataTable({
            language: {
                url: "//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"
            }
        });

        $('#filtroFecha').on('change', function () {
            tabla.column(0).search(this.value).draw();
        });

        $('#filtroEstado').on('change', function () {
            tabla.column(4).search(this.value, true, false).draw();
        });
    });

    function limpiarFiltros() {
        $('#filtroFecha').val('');
        $('#filtroEstado').val('');
        $('#tablaReservas').DataTable().search('').columns().search('').draw();
    }
</script>

</body>
</html>
